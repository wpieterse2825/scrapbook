load("//randoms/foundation/build/rules/cpp:cpp_library.bzl", "cpp_library")

cpp_library(
    name = "internal",
    hdrs = ["internal.hpp"],
    visibility = ["//randoms/foundation/frameworks/core/simd:__subpackages__"],
    deps = ["//randoms/foundation/frameworks/core/types:export"],
)

cpp_library(
    name = "export",
    hdrs = ["simd.hpp"],
    defines = select({
        "//randoms/foundation/build/platforms/cpu:is_x86_64": ["NM_CORE_SIMD_IMPLEMENTATION=2"],
        "//conditions:default": ["NM_CORE_SIMD_IMPLEMENTATION=1"],
    }),
    visibility = ["//randoms/foundation/frameworks/core:__subpackages__"],
    deps = select({
        "//randoms/foundation/build/platforms/cpu:is_x86_64": ["//randoms/foundation/frameworks/core/simd/x86:export"],
        "//conditions:default": ["//randoms/foundation/frameworks/core/simd/common:export"],
    }),
)
